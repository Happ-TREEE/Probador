<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de los colores</title>
</head>

<style>
    :root {
        --color_primario: red;
        --color_secundario: green;
        --color_terciario: yellow;
    }

    .bg-primario {
        background-color: var(--color_primario);
        color: white;
        font-weight: bold;
        padding: 1rem;
        margin-bottom: 1cqmax;
    }

    .bg-secundario {
        background-color: var(--color_secundario);
        color: white;
        font-weight: bold;
        padding: 1rem;
        margin-bottom: 1rem;
    }

    .bg-terciario {
        background-color: var(--color_terciario);
        color: white;
        font-weight: bold;
        padding: 1rem;
        margin-bottom: 1rem;
    }

    .btn {
        background-color: var(--color_primario);
        color: white;
        font-weight: bold;
        padding: 1rem;
        border-radius: 1.5rem;

    }
</style>

<body>
    <div class="bg-primario">
        Caja primaria
    </div>

    <div class="bg-secundario">
        Caja secundaria
    </div>

    <div class="bg-terciario">
        Caja terciaria
    </div>

    <input type="file" id="imageInput" accept="image/*">
    <img id="uploadedImage" crossorigin="anonymous" style="max-width: 20rem; margin-top: 20px;">
    <p>Colores dominantes:</p>
    <div id="colorDisplay" style="margin-top: 20px;"></div>
    <button id="btn" class="btn">Cambiar colores de la página</button>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.2/color-thief.umd.js"></script>
<script>
    const input = document.getElementById('imageInput');
    const img = document.getElementById('uploadedImage');
    const colorThief = new ColorThief();
    const colorDisplay = document.getElementById('colorDisplay');
    const btn = document.getElementById('btn');

    let color1RGB = ''; // Definimos fuera para usar después

    input.addEventListener('change', function () {
        const file = this.files[0];
        const reader = new FileReader();
        reader.onload = function (e) {
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    });

    img.onload = function () {
        if (img.complete) {
            // Obtener la paleta de 3 colores
            const palette = colorThief.getPalette(img, 3); // 3 colores
            const [r1, g1, b1] = palette[0]; //Primer color
            const [r2, g2, b2] = palette[1];
            const [r3, g3, b3] = palette[2];

            // Guardamos como string para usar en el botón
            color1RGB = `rgb(${r1}, ${g1}, ${b1})`;
            color2RGB = `rgb(${r2}, ${g2}, ${b2})`;
            color3RGB = `rgb(${r3}, ${g3}, ${b3})`;

            // Limpiar el display previo de colores
            colorDisplay.innerHTML = '';

            // Mostrar los colores en el HTML
            palette.forEach((color, index) => {
                const colorBox = document.createElement('div');
                colorBox.style.backgroundColor = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;
                colorBox.style.width = '100px';
                colorBox.style.height = '100px';
                colorBox.style.display = 'inline-block';
                colorBox.style.margin = '10px';
                colorDisplay.appendChild(colorBox);

                console.log(`Color ${index + 1}: rgb(${color[0]}, ${color[1]}, ${color[2]})`);
            });
        }
    };

    // Botón para cambiar el color CSS
    btn.addEventListener('click', () => {
        if (color1RGB) {
            document.documentElement.style.setProperty('--color_primario', color1RGB);
            document.documentElement.style.setProperty('--color_secundario', color2RGB);
            document.documentElement.style.setProperty('--color_terciario', color3RGB);
            console.log('Colores actualizados:', {
                primario: color1RGB,
                secundario: color2RGB,
                terciario: color3RGB
            });
        } else {
            alert('Primero selecciona una imagen.');
        }
    });
</script>


</html>