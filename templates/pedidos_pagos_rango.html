<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Reporte de Pedidos y Pagos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <style>
    .table thead, 
    .table thead th {
      background-color: #000000 !important;
      color: #ffffff !important;
      border-color: #000000 !important;
      background-image: none !important;
      white-space: nowrap;
    }

    body {
      background-color: #f8f9fa;
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }

    .card {
      box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.2);
      border-radius: 0.375rem;
    }

    h4.card-header {
      font-weight: 700;
    }

    .btn-primary {
      background-color: #11b41e;
      border-color: #11b41e;
      font-weight: 600;
      width: auto; /* que no tome todo el ancho */
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
    .btn-primary:hover {
      background-color: #0e9018;
      border-color: #0e9018;
      color: white;
    }

    .form-label {
    white-space: nowrap; /* para que no haga salto de línea */
    font-weight: 500;
    margin-bottom: 0;
    }


    .input-group-text {
      background-color: #000000;
      color: white;
      border: none;
      border-radius: 0.375rem 0 0 0.375rem;
    }

    .table tbody tr:hover {
      background-color: #ffe680 !important;
    }

    /* Flex para poner label + icono + input en línea */
    .form-group-inline {
      display: flex;
      align-items: center;
    }

    /* Para que input tenga border-left 0 y border-radius en el input */
    .form-group-inline .form-control {
      border-radius: 0 0.375rem 0.375rem 0;
      border-left: 0;
      min-width: 170px;
    }
  </style>
</head>
<body class="bg-light py-4">
  <div class="container-fluid">
    <div class="card shadow rounded">
        <div class="card-header bg-white d-flex justify-content-center align-items-center text-center">
        <h4 class="mb-0">Reporte de Pedidos por Rango de Fechas</h4>
        </div>


      <div class="card-body">
        <form method="POST" class="row g-3 justify-content-center mb-4 align-items-center">
        <div class="col-auto d-flex align-items-center gap-2">
            <label for="fecha_inicio" class="form-label mb-0">Fecha Inicio</label>
            <div class="input-group input-group-sm">
            <span class="input-group-text"><i class="bi bi-calendar-date"></i></span>
            <input type="date" class="form-control" name="fecha_inicio" id="fecha_inicio" required>
            </div>
        </div>

        <div class="col-auto d-flex align-items-center gap-2">
            <label for="fecha_fin" class="form-label mb-0">Fecha Fin</label>
            <div class="input-group input-group-sm">
            <span class="input-group-text"><i class="bi bi-calendar-date"></i></span>
            <input type="date" class="form-control" name="fecha_fin" id="fecha_fin" required>
            </div>
        </div>

        <div class="col-auto">
            <button type="submit" class="btn btn-primary px-4">
            <i class="bi bi-search"></i> Filtrar
            </button>
        </div>
        </form>


        <div class="table-responsive">
          <table class="table table-hover table-bordered align-middle text-center mb-0">
            <thead>
              <tr>
                <th>ID Pedido</th>
                <th>Fecha Registro</th>
                <th>Nombre Completo</th>
                <th>Monto Pagado</th>
                <th>Estado del Pago</th>
              </tr>
            </thead>
            <tbody>
              {% for pedido in pedidos %}
              <tr>
                <td>{{ pedido.id_pedido }}</td>
                <td>{{ pedido.fecha_registro }}</td>
                <td class="text-nowrap">{{ pedido.nombre_completo }}</td>
                <td>S/{{ '%.2f'|format(pedido.monto_pagado) }}</td>
                <td>{{ pedido.estado_pago }}</td>
              </tr>
              {% else %}
              <tr>
                <td colspan="5" class="text-center text-muted">No hay pedidos en el rango seleccionado.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <div class="mt-3 d-flex justify-content-end">
          <a href="{{ url_for('inicio_admin') }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Regresar
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


